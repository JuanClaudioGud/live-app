<ion-card
  ngClass.xs="m-p-0"
  class="post-card"
  style="margin-top: 10px"
  *ngIf="structureStatus"
>
<div
    *ngIf="actualNode.media" 
    style="background-color: black; height: 100%"
  >
   <ion-slides
      *ngIf="showSlides"
      pager="true"
      [options]="slideOpts"
      style="background-color: black; height: 100%"
    >
      <ion-slide 
        class="slide" 
        style="width: 100%"
        *ngFor="let url of actualNode.media"
      >
        <img 
          [src]="url" 
          class="img" 
          alt="" 
          style="width: 100%" 
        />
      </ion-slide>
    </ion-slides>
  </div>
  <ion-card-header>
    <div style="text-align: right">
      <ion-button 
        *ngIf="actualNode.subtitle.split(' / ').length > 1"
        (click)="goBack(actualNode, structure)" 
        fill="outline"
      >
        <ion-icon name="arrow-back-outline" style="margin-right:5px"></ion-icon>
        Volver
      </ion-button>
      <ion-button 
        (click)="restart()" 
        fill="outline"
      >
        Reiniciar
        <ion-icon name="reload-outline" style="margin-left:5px"></ion-icon>
      </ion-button>
      <ion-button
        *ngIf="creator"
        fill="outline"
        (click)="editNodes(actualNode)"
      >
        {{ "structure.start" | translate }}
        <ion-icon name="create-outline" style="margin-left: 5px">
        </ion-icon>
      </ion-button>
    </div>

    <ion-card-title class="title">
      {{ actualNode.title | translate }}
    </ion-card-title>

    <ion-card-subtitle class="subtitle">
      {{ actualNode.text }}
    </ion-card-subtitle>
  </ion-card-header>

  <ion-grid>
    <ion-row>
      <ion-col 
        size-xs="6"
        size-sm="6"
        size-md="4" 
        size-lg="4"
      >
        <ion-card class="node">
          <div 
            class="node-img" 
            [ngStyle]="{
              'background'
              : 'url('+defaultImg+') no-repeat center center'
            }"
          >
            <div class="overlay">
              <div class="buttons">
                <div class="icon-div">
                  <ion-icon 
                    class="icon"
                    name="add-circle-outline"
                    color="primary"
                    (click)="createNode(i)"
                  ></ion-icon>
                </div>
              </div>
            </div>
          </div>
          <h1 
            class="node-title"
            (click)="createNode(i)"
          >
            Crear
          </h1>
          <p style="text-align:center">
            Â¡Crear un nuevo {{actualNode.subtitle.split("/").reverse()[0] | translate}}!
          </p>
        </ion-card>
      </ion-col>

      <ion-col 
        size-xs="6"
        size-sm="6"
        size-md="4" 
        size-lg="4"
        *ngFor="let i of actualNode.childs"
      >
        <ion-card class="node">
          <div 
            class="node-img" 
            [ngStyle]="{
              'background'
              : 
              i.media ? i.media.length > 0 ? i.media[0] !== undefined ? 'url('+i.media[0]+') no-repeat center center'
                  : 'url('+defaultImg+') no-repeat center center'
                : 'url('+defaultImg+') no-repeat center center'
              : 'url('+defaultImg+') no-repeat center center'
            }"
          >
            <div class="overlay">
              <div class="buttons">
                <div class="icon-div">
                  <ion-icon 
                    name="eye-outline"
                    class="icon"
                    color="primary"
                    (click)="openImg(i)"
                  ></ion-icon>
                </div>
                <div class="icon-div">
                  <ion-icon 
                    class="icon"
                    name="create-outline"
                    color="warning"
                    (click)="editMedia(i)"
                  ></ion-icon>
                </div>
                <div class="icon-div">
                  <ion-icon 
                    class="icon"
                    name="trash-outline"
                    color="danger"
                    (click)="eliminar(i)"
                  ></ion-icon>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center">
            <h1 class="node-title" (click)="actualNode = i">
              {{ i.title }}
            </h1>
            <p *ngIf="i.text">
              {{ i.text }}
            </p>
          </div>
          <!--
            <ion-item>
            <ion-avatar slot="start">
              <img [src]="i.photo" />
            </ion-avatar>
            <ion-label>
              <h3>{{ i.subtitle | translate }}</h3>
              <p>
                {{
                  i.text.length > 15
                    ? i.text.substring(0, 25) + "..."
                    : (i.text | translate)
                }}
              </p>
              <ion-button (click)="actualNode = i" fill="outline">
                <ion-icon name="eye-outline" style="margin-right: 5px"></ion-icon>
                {{ "structure.see" | translate }}
              </ion-button>
              <ion-button *ngIf="creator" (click)="editNodes(i)">
                <ion-icon name="create-outline"></ion-icon>
              </ion-button>
              <ion-button
                *ngIf="creator"
                (click)="deleteNode(structure, i.id)"
                color="danger"
              >
                <ion-icon name="trash"> </ion-icon>
              </ion-button>
            </ion-label>
          </ion-item>
          -->
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-card>
