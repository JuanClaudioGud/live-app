<ion-content class="content">
  <ion-icon
    name="close-outline"
    (click)="modalCtrl.dismiss()"
    class="close-modal"
  ></ion-icon>
  <loading-progress class="progress"></loading-progress>
  <div class="sponsor-content" *ngIf="!noAccount">
    <h4 class="title" *ngIf="sponsorSelected == null">
      {{ "sponsors.create.account.title" | translate }}
    </h4>
    <sponsors-search
      *ngIf="sponsorSelected == null"
      (selected)="setSponsor($event)"
    ></sponsors-search>
    <div *ngIf="sponsorSelected != null" style="text-align: center">
      <h3>
        {{ "sponsors.create.account.hint" | translate }}
      </h3>
      <preview-cards-sponsor
        [info]="sponsorSelected.sponsor_info"
      ></preview-cards-sponsor>
      <div>
        <ion-button class="btn-cancel" (click)="sponsorSelected = null">{{
          "cancel" | translate
        }}</ion-button>
      </div>
    </div>
  </div>

  <div *ngIf="noAccount">
    <form [formGroup]="form">
      <div class="text" style="text-align: center">
        Sube una imagen de tu patrocinador
      </div>
      <div class="image-container">
        <img class="img" [src]="form.value.image" (click)="add()" />
      </div>
      <ion-list>
        <ion-item>
          <ion-label position="stacked"> Nombre del patrocinador </ion-label>
          <ion-input
            placeholder="SportYeah!"
            type="text"
            formControlName="name"
          ></ion-input>
        </ion-item>
        <p
          class="errormsj"
          *ngIf="
            (form.get('name').dirty || form.get('name').touched) &&
            form.get('name').status !== 'VALID'
          "
        >
          Introduce el nombre del patrocinador
        </p>
        <ion-item>
          <ion-label position="stacked"> Pagina del patrocinador </ion-label>
          <ion-input
            placeholder="https://app.sportyeah.com/"
            type="text"
            formControlName="url"
          ></ion-input>
        </ion-item>
        <p
          class="errormsj"
          *ngIf="
            (form.get('url').dirty || form.get('url').touched) &&
            form.get('url').status !== 'VALID'
          "
        >
          No corresponde con una URL
        </p>
      </ion-list>
    </form>
  </div>
  <ion-item>
    <ion-label>Mi patrocinador no tiene cuenta en sportyeah</ion-label>
    <ion-checkbox slot="end" [(ngModel)]="noAccount"></ion-checkbox>
  </ion-item>
  <div style="padding: 10px; text-align: center">
    <ion-button
      fill="outline"
      (click)="create()"
      [disabled]="form.status !== 'VALID'"
    >
      Guardar patrocinador
    </ion-button>
  </div>
  <input
    #openImage
    type="file"
    accept="image/*"
    (change)="uploadImage($event)"
    hidden
  />
</ion-content>
