<ion-card class="audio msg" [ngClass]="(message.user._id == userService.User?._id)?'my-msg':''" *ngIf="!onlyAudio; else oAudio">
  <ion-icon style="z-index: 100;" *ngIf="message.user._id == userService.User?._id" name="chevron-down" class="msg-options-icon" (click)="options($event,message)"></ion-icon>


  <ion-grid>
    <ion-row>
      <ion-col  *ngIf="userService.User?._id != message.user._id" size="12">
        <msg-user-preview [user]="message.user"></msg-user-preview>

      </ion-col>
      <ion-col size="3" class="p-10-0"> 
         <ion-icon class="play" (click)="playAudio()" [name]="(!(currentTime != 0 && !pause))?'play':'pause'"></ion-icon> 
       </ion-col>
       <ion-col size="9" class="bar p-10-0">         
         <ion-progress-bar  color="secondary" [value]="currentTime/duration"></ion-progress-bar>
         <span class="duration">{{currentTime | diffTime}} / {{duration | diffTime}}</span>
       </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        

        <span class="date" >{{message.date | customDisplayDate}} <ion-icon *ngIf="message.user._id == userService.User?._id" [ngClass]="(message.read)?'read':''" name="checkmark-done" style="font-size: 20px;vertical-align: middle;"></ion-icon></span>
      </ion-col>

    </ion-row>
  </ion-grid>


</ion-card>

<ng-template #oAudio>
  <div style="display: flex;justify-content: space-between;align-items: center;padding: .5em 1em;">
    <ion-fab-button color="light" (click)="playAudio()">
      <ion-icon class="play" [name]="(!(currentTime != 0 && !pause))?'play':'pause'"></ion-icon> 
    </ion-fab-button>
    <div class="bar-width">
      <ion-progress-bar color="secondary" [value]="currentTime/duration"></ion-progress-bar>
        <span class="duration2">{{currentTime | diffTime}} / {{duration | diffTime}}</span>
    </div>
  </div>
</ng-template>
