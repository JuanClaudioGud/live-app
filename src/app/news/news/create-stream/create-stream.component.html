
<ion-header>
  <ion-toolbar class="bg-gradient-person">
    <ion-buttons slot="start">
      <ion-back-button style="color: white"></ion-back-button>
    </ion-buttons>
    <ion-buttons *ngIf="begingStream"  slot="end">
      <ion-button style="background:#ceceff ;" (click)="leaveCall()">leave Call</ion-button>
      <h3 style="font-size:10px;color: red;">live</h3>
    </ion-buttons>
    <ion-title style="--color: white">{{ 'news.streaming'| translate}}</ion-title>
    
  </ion-toolbar>
</ion-header>
<ion-content  class="bg-gradient-person">
  <ion-grid>
    <ion-row class="rowStyle">
      <ion-col size="12">
        <ion-grid>
          <ion-row >
            <ion-col *ngIf="!begingStream"  style="text-align: center;" >
              <ion-button [disabled]="(titulo1 != '' && titulo1 != null) && (deporte != '' && deporte != null) && (titlebool) ?false:true" (click)="startBasicCall()">Start Directo</ion-button>
              <h3 style="font-size:10px">Transmitir desde la cámara</h3>
            </ion-col>
            <ion-col *ngIf="!begingStream"  style="text-align: center;" >
              <ion-button [disabled]="(titulo1 != '' && titulo1 != null) && (deporte != '' && deporte != null) && (titlebool) ?false:true" (click)="startScreenTransmision()">Start Screen</ion-button>       
              <h3 style="font-size:10px">Transmision de pantalla</h3>
            </ion-col>
            <!-- <ion-col *ngIf="begingStream" style="text-align: center;" >
              <ion-button (click)="leaveCall()">leave Call</ion-button>
              <h3 style="font-size:10px;color: red;">live</h3>
            </ion-col> -->
          </ion-row>
        </ion-grid>
         
        <!-- <ion-item>
          <ion-label>Cálidad</ion-label>
          <ion-select [(ngModel)]="formateSelected">  
            <ion-select-option  *ngFor="let video of videoProfiles"  >{{video.value}}</ion-select-option>              
          </ion-select>
        </ion-item> -->
    
<!--     <ion-button (click)="subscribe()">subcribir Call</ion-button>
        <ion-button (click)="unSubscribe()">unSubscribe Call</ion-button> -->
      </ion-col>
      <ion-col size="12">
        <ion-item *ngIf="!titlebool">
          <ion-label>{{'news.title' | translate}}</ion-label>
          <ion-input  style="background: white; color: black;" placeholder="Título del stream" [(ngModel)]="titulo1"></ion-input>
          <ion-button (click)="tituloListo()" [disabled]="(titulo1 != null && titulo1 != '')?false:true"  float-right ion-button ><ion-icon name="add"></ion-icon></ion-button>
        </ion-item>
        <ion-item *ngIf="!deporte">
          <ion-label position="floating">{{'sport.sport' | translate}}</ion-label>
            <ion-select  [(ngModel)]="deporte">
              <ion-select-option (click)="deporteListo()" *ngFor="let sport of sports" [value]="sport" >{{ 'sport.'+sport| translate}}</ion-select-option>              
            </ion-select>
          </ion-item>
        <h4 *ngIf="deporte" style="text-align: center;color: #737373;font-size: 14px;">{{ 'sport.'+deporte| translate}}<ion-icon *ngIf="!begingStream"  (click)="deporteListo()" class="editIcon" name="pencil-outline" ></ion-icon></h4>
        <h1 *ngIf="titlebool" style="text-align: center;font-size: 30px;">{{titulo1}}<ion-icon *ngIf="!begingStream" (click)="tituloListo()"  class="editIcon" name="pencil-outline" ></ion-icon></h1>
      </ion-col>
      <ion-col style="text-align: center;" 	size-xl="8"	size-xs="12">
        
          <!-- <p id="local-player-name" class="player-name"></p> -->
          <div style="margin-left: auto;margin-right: auto; width: 100%;"> 
            <div *ngIf="begingStream" id="localPlayer" class="player"></div>          
            <div class="w-100"></div>
          </div>
                   
         <!-- < div id="remotePlayerlist"></div> -->       
        <!-- REACCIONES -->
<div id="reactsDiv" #reacts
>
<div class="overlay" fxShow="false" fxShow.xs="true"></div>
</div>
<!-- FIN REACCIONES -->

<div *ngIf="news && begingStream" style="--background: white;width: 85%;margin-top: 5%;margin-left: auto;margin-right: auto;">
  <post-options style="background: white;"
   [news]="news"
   isPost="false"
 ></post-options>
 </div>
      </ion-col>

       <!-- Comentarios -->
       <ion-col *ngIf="begingStream" size-xl="4"	size-xs="12">
        <ion-content style="height: 78%;width: 100%; ">
          <ion-card *ngFor="let comment of news?.comments" class="comment"  >
            <ion-card-header>
              <ion-card-subtitle class="user-header">
                <ion-avatar class="mini">
                <ion-img class="img-user-mini" [src]="comment.user.photo"></ion-img>
                <div class="connectedDIVlittle" *ngIf="comment.user.connected"></div>
              </ion-avatar>
              <div class="user-name">
                <span class="message profile-name"
                 >{{comment.user.name}} {{comment.user.last_name}}</span><br>
                <span>{{comment.date | customDisplayDate}}</span>
              </div>
              
              </ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <span *ngIf="comment.message" [innerHTML]="comment.message | links"></span>
              <ion-img 
               class="img-comment" *ngIf="comment.image" [src]="comment.image">
              </ion-img>
            </ion-card-content>
            </ion-card>
        </ion-content>
   
        <comment-post  [news]="news?.news" (newComment)="comments($event)"></comment-post>
      </ion-col>
<!-- Fin Comentarios -->
    </ion-row>
  </ion-grid>
</ion-content>